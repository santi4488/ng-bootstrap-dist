{"version":3,"file":"dropdown.js","sourceRoot":"","sources":["../../src/dropdown/dropdown.ts"],"names":[],"mappings":"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","sourcesContent":["import {\r\n  forwardRef,\r\n  Inject,\r\n  Directive,\r\n  Input,\r\n  Output,\r\n  EventEmitter,\r\n  ElementRef,\r\n  ContentChild,\r\n  NgZone,\r\n  Renderer2,\r\n  OnInit\r\n} from '@angular/core';\r\nimport {NgbDropdownConfig} from './dropdown-config';\r\nimport {positionElements, PlacementArray, Placement} from '../util/positioning';\r\n\r\n/**\r\n */\r\n@Directive(\r\n    {selector: '[ngbDropdownMenu]', host: {'[class.dropdown-menu]': 'true', '[class.show]': 'dropdown.isOpen()'}})\r\nexport class NgbDropdownMenu {\r\n  placement: Placement = 'bottom';\r\n  isOpen = false;\r\n\r\n  constructor(\r\n      @Inject(forwardRef(() => NgbDropdown)) public dropdown, private _elementRef: ElementRef,\r\n      private _renderer: Renderer2) {}\r\n\r\n  isEventFrom($event) { return this._elementRef.nativeElement.contains($event.target); }\r\n\r\n  position(triggerEl, placement) {\r\n    this.applyPlacement(positionElements(triggerEl, this._elementRef.nativeElement, placement));\r\n  }\r\n\r\n  applyPlacement(_placement: Placement) {\r\n    // remove the current placement classes\r\n    this._renderer.removeClass(this._elementRef.nativeElement.parentNode, 'dropup');\r\n    this._renderer.removeClass(this._elementRef.nativeElement.parentNode, 'dropdown');\r\n    this.placement = _placement;\r\n    /**\r\n     * apply the new placement\r\n     * in case of top use up-arrow or down-arrow otherwise\r\n     */\r\n    if (_placement.search('^top') !== -1) {\r\n      this._renderer.addClass(this._elementRef.nativeElement.parentNode, 'dropup');\r\n    } else {\r\n      this._renderer.addClass(this._elementRef.nativeElement.parentNode, 'dropdown');\r\n    }\r\n  }\r\n}\r\n\r\n/**\r\n * Allows the dropdown to be toggled via click. This directive is optional.\r\n */\r\n@Directive({\r\n  selector: '[ngbDropdownToggle]',\r\n  host: {\r\n    'class': 'dropdown-toggle',\r\n    'aria-haspopup': 'true',\r\n    '[attr.aria-expanded]': 'dropdown.isOpen()',\r\n    '(click)': 'toggleOpen()'\r\n  }\r\n})\r\nexport class NgbDropdownToggle {\r\n  anchorEl;\r\n\r\n  constructor(@Inject(forwardRef(() => NgbDropdown)) public dropdown, private _elementRef: ElementRef) {\r\n    this.anchorEl = _elementRef.nativeElement;\r\n  }\r\n\r\n  toggleOpen() { this.dropdown.toggle(); }\r\n\r\n  isEventFrom($event) { return this._elementRef.nativeElement.contains($event.target); }\r\n}\r\n\r\n/**\r\n * Transforms a node into a dropdown.\r\n */\r\n@Directive({\r\n  selector: '[ngbDropdown]',\r\n  exportAs: 'ngbDropdown',\r\n  host: {\r\n    '[class.show]': 'isOpen()',\r\n    '(keyup.esc)': 'closeFromOutsideEsc()',\r\n    '(document:click)': 'closeFromClick($event)'\r\n  }\r\n})\r\nexport class NgbDropdown implements OnInit {\r\n  private _zoneSubscription: any;\r\n\r\n  @ContentChild(NgbDropdownMenu) private _menu: NgbDropdownMenu;\r\n\r\n  @ContentChild(NgbDropdownToggle) private _toggle: NgbDropdownToggle;\r\n\r\n  /**\r\n   * Indicates that dropdown should be closed when selecting one of dropdown items (click) or pressing ESC.\r\n   * When it is true (default) dropdowns are automatically closed on both outside and inside (menu) clicks.\r\n   * When it is false dropdowns are never automatically closed.\r\n   * When it is 'outside' dropdowns are automatically closed on outside clicks but not on menu clicks.\r\n   * When it is 'inside' dropdowns are automatically on menu clicks but not on outside clicks.\r\n   */\r\n  @Input() autoClose: boolean | 'outside' | 'inside';\r\n\r\n  /**\r\n   *  Defines whether or not the dropdown-menu is open initially.\r\n   */\r\n  @Input('open') _open = false;\r\n\r\n  /**\r\n   * Placement of a popover accepts:\r\n   *    \"top\", \"top-left\", \"top-right\", \"bottom\", \"bottom-left\", \"bottom-right\",\r\n   *    \"left\", \"left-top\", \"left-bottom\", \"right\", \"right-top\", \"right-bottom\"\r\n   * and array of above values.\r\n   */\r\n  @Input() placement: PlacementArray;\r\n\r\n  /**\r\n   *  An event fired when the dropdown is opened or closed.\r\n   *  Event's payload equals whether dropdown is open.\r\n   */\r\n  @Output() openChange = new EventEmitter();\r\n\r\n  constructor(config: NgbDropdownConfig, ngZone: NgZone) {\r\n    this.placement = config.placement;\r\n    this.autoClose = config.autoClose;\r\n    this._zoneSubscription = ngZone.onStable.subscribe(() => { this._positionMenu(); });\r\n  }\r\n\r\n  ngOnInit() {\r\n    if (this._menu) {\r\n      this._menu.applyPlacement(Array.isArray(this.placement) ? (this.placement[0]) : this.placement as Placement);\r\n    }\r\n  }\r\n\r\n  /**\r\n   * Checks if the dropdown menu is open or not.\r\n   */\r\n  isOpen(): boolean { return this._open; }\r\n\r\n  /**\r\n   * Opens the dropdown menu of a given navbar or tabbed navigation.\r\n   */\r\n  open(): void {\r\n    if (!this._open) {\r\n      this._open = true;\r\n      this._positionMenu();\r\n      this.openChange.emit(true);\r\n    }\r\n  }\r\n\r\n  /**\r\n   * Closes the dropdown menu of a given navbar or tabbed navigation.\r\n   */\r\n  close(): void {\r\n    if (this._open) {\r\n      this._open = false;\r\n      this.openChange.emit(false);\r\n    }\r\n  }\r\n\r\n  /**\r\n   * Toggles the dropdown menu of a given navbar or tabbed navigation.\r\n   */\r\n  toggle(): void {\r\n    if (this.isOpen()) {\r\n      this.close();\r\n    } else {\r\n      this.open();\r\n    }\r\n  }\r\n\r\n  closeFromClick($event) {\r\n    if (this.autoClose && $event.button !== 2 && !this._isEventFromToggle($event)) {\r\n      if (this.autoClose === true) {\r\n        this.close();\r\n      } else if (this.autoClose === 'inside' && this._isEventFromMenu($event)) {\r\n        this.close();\r\n      } else if (this.autoClose === 'outside' && !this._isEventFromMenu($event)) {\r\n        this.close();\r\n      }\r\n    }\r\n  }\r\n\r\n  closeFromOutsideEsc() {\r\n    if (this.autoClose) {\r\n      this.close();\r\n    }\r\n  }\r\n\r\n  ngOnDestroy() { this._zoneSubscription.unsubscribe(); }\r\n\r\n  private _isEventFromToggle($event) { return this._toggle ? this._toggle.isEventFrom($event) : false; }\r\n\r\n  private _isEventFromMenu($event) { return this._menu ? this._menu.isEventFrom($event) : false; }\r\n\r\n  private _positionMenu() {\r\n    if (this.isOpen() && this._menu && this._toggle) {\r\n      this._menu.position(this._toggle.anchorEl, this.placement);\r\n    }\r\n  }\r\n}\r\n"]}
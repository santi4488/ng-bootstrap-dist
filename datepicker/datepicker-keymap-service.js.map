{"version":3,"file":"datepicker-keymap-service.js","sourceRoot":"","sources":["../../src/datepicker/datepicker-keymap-service.ts"],"names":[],"mappings":"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","sourcesContent":["import {Injectable} from '@angular/core';\r\nimport {NgbDatepickerService} from './datepicker-service';\r\nimport {NgbCalendar} from './ngb-calendar';\r\nimport {toString} from '../util/util';\r\nimport {NgbDate} from './ngb-date';\r\n\r\nenum Key {\r\n  Enter = 13,\r\n  Space = 32,\r\n  PageUp = 33,\r\n  PageDown = 34,\r\n  End = 35,\r\n  Home = 36,\r\n  ArrowLeft = 37,\r\n  ArrowUp = 38,\r\n  ArrowRight = 39,\r\n  ArrowDown = 40\r\n}\r\n\r\n@Injectable()\r\nexport class NgbDatepickerKeyMapService {\r\n  private _minDate: NgbDate;\r\n  private _maxDate: NgbDate;\r\n  private _firstViewDate: NgbDate;\r\n  private _lastViewDate: NgbDate;\r\n\r\n  constructor(private _service: NgbDatepickerService, private _calendar: NgbCalendar) {\r\n    _service.model$.subscribe(model => {\r\n      this._minDate = model.minDate;\r\n      this._maxDate = model.maxDate;\r\n      this._firstViewDate = model.firstDate;\r\n      this._lastViewDate = model.lastDate;\r\n    });\r\n  }\r\n\r\n  processKey(event: KeyboardEvent) {\r\n    if (Key[toString(event.which)]) {\r\n      switch (event.which) {\r\n        case Key.PageUp:\r\n          this._service.focusMove(event.shiftKey ? 'y' : 'm', -1);\r\n          break;\r\n        case Key.PageDown:\r\n          this._service.focusMove(event.shiftKey ? 'y' : 'm', 1);\r\n          break;\r\n        case Key.End:\r\n          this._service.focus(event.shiftKey ? this._maxDate : this._lastViewDate);\r\n          break;\r\n        case Key.Home:\r\n          this._service.focus(event.shiftKey ? this._minDate : this._firstViewDate);\r\n          break;\r\n        case Key.ArrowLeft:\r\n          this._service.focusMove('d', -1);\r\n          break;\r\n        case Key.ArrowUp:\r\n          this._service.focusMove('d', -this._calendar.getDaysPerWeek());\r\n          break;\r\n        case Key.ArrowRight:\r\n          this._service.focusMove('d', 1);\r\n          break;\r\n        case Key.ArrowDown:\r\n          this._service.focusMove('d', this._calendar.getDaysPerWeek());\r\n          break;\r\n        case Key.Enter:\r\n        case Key.Space:\r\n          this._service.focusSelect();\r\n          break;\r\n        default:\r\n          return;\r\n      }\r\n\r\n      event.preventDefault();\r\n      event.stopPropagation();\r\n    }\r\n  }\r\n}\r\n"]}